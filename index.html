<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Sobreaviso DRV/DEIC</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; color: #333; }
        .container { max-width: 800px; margin: 0 auto; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); overflow: hidden; }
        .header { background: #2563eb; color: white; padding: 30px 20px; text-align: center; }
        .header h1 { font-size: 28px; margin-bottom: 5px; }
        .tabs { display: flex; background: #f0f0f0; border-bottom: 2px solid #ddd; }
        .tab-btn { flex: 1; padding: 15px; border: none; background: none; cursor: pointer; font-size: 16px; font-weight: bold; color: #666; transition: all 0.3s; border-bottom: 3px solid transparent; }
        .tab-btn.active { background: white; color: #2563eb; border-bottom-color: #2563eb; }
        .tab-btn:hover { background: #f9f9f9; }
        .content { padding: 30px; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        label { display: block; margin-bottom: 10px; font-weight: bold; color: #333; }
        select, textarea { width: 100%; padding: 12px; margin-bottom: 20px; border: 1px solid #ddd; border-radius: 4px; font-size: 14px; font-family: Arial, sans-serif; }
        select { cursor: pointer; }
        textarea { height: 350px; resize: vertical; font-family: 'Courier New', monospace; font-size: 13px; }
        .troca-bloco { margin-bottom: 16px; border: 1px solid #eee; border-radius: 6px; padding: 10px; background: #fcfcfc; }
        .buttons { display: flex; gap: 10px; flex-wrap: wrap; }
        button { padding: 12px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 15px; font-weight: bold; transition: all 0.3s; flex: 1; min-width: 120px; }
        .btn-copy { background: #2563eb; color: white; }
        .btn-copy:hover { background: #1d4ed8; }
        .btn-whatsapp { background: #16a34a; color: white; }
        .btn-whatsapp:hover { background: #15803d; }
        .btn-clear { background: #6b7280; color: white; }
        .btn-clear:hover { background: #4b5563; }
        .btn-troca { background: #ff9800; color: white; }
        .btn-troca:hover { background: #f57c00; }
        @media (max-width: 600px) {
            .header h1 { font-size: 20px; }
            .tabs { flex-direction: column; }
            textarea { height: 250px; }
            button { min-width: 100%; }
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">
        <h1>üìã Gerador de Sobreaviso DRV/DEIC</h1>
    </div>
    <div class="tabs">
        <button class="tab-btn active" onclick="showTab(0)">üìÖ Buscar por Data</button>
        <button class="tab-btn" onclick="showTab(1)">üë§ Buscar por Pessoa</button>
        <button class="tab-btn" onclick="showTab(2)">üîÑ Trocas</button>
    </div>
    <div class="content">
        <!-- ABA 1: BUSCAR POR DATA -->
        <div class="tab-content active">
            <label for="date-select">Selecione a data:</label>
            <select id="date-select" onchange="searchByDate()">
                <option value="">-- Escolha uma data --</option>
                <!-- Todas as datas de novembro e dezembro 2025 -->
                <option>01/11/2025</option><option>02/11/2025</option><option>03/11/2025</option><option>04/11/2025</option><option>05/11/2025</option><option>06/11/2025</option><option>07/11/2025</option><option>08/11/2025</option><option>09/11/2025</option><option>10/11/2025</option><option>11/11/2025</option><option>12/11/2025</option><option>13/11/2025</option><option>14/11/2025</option><option>15/11/2025</option><option>16/11/2025</option><option>17/11/2025</option><option>18/11/2025</option><option>19/11/2025</option><option>20/11/2025</option><option>21/11/2025</option><option>22/11/2025</option><option>23/11/2025</option><option>24/11/2025</option><option>25/11/2025</option><option>26/11/2025</option><option>27/11/2025</option><option>28/11/2025</option><option>29/11/2025</option><option>30/11/2025</option>
                <option>01/12/2025</option><option>02/12/2025</option><option>03/12/2025</option><option>04/12/2025</option><option>05/12/2025</option><option>06/12/2025</option><option>07/12/2025</option><option>08/12/2025</option><option>09/12/2025</option><option>10/12/2025</option><option>11/12/2025</option><option>12/12/2025</option><option>13/12/2025</option><option>14/12/2025</option><option>15/12/2025</option><option>16/12/2025</option><option>17/12/2025</option><option>18/12/2025</option><option>19/12/2025</option><option>20/12/2025</option><option>21/12/2025</option><option>22/12/2025</option><option>23/12/2025</option><option>24/12/2025</option><option>25/12/2025</option><option>26/12/2025</option><option>27/12/2025</option><option>28/12/2025</option><option>29/12/2025</option><option>30/12/2025</option><option>31/12/2025</option>
            </select>
        </div>
        <!-- ABA 2: BUSCAR POR PESSOA -->
        <div class="tab-content">
            <label for="person-select">Selecione uma pessoa:</label>
            <select id="person-select" onchange="handlePersonSearch()">
                <option value="">-- Escolha uma pessoa --</option>
                <option value="Cau">Insp. Acau√£</option><option value="Saraiva">Esc. Anderson Saraiva</option><option value="Brozoza">Insp. Alexandre Brozoza</option><option value="C√°tia">Esc. C√°tia Fortunato</option><option value="Cristiano">Insp. Cristiano Soletti</option><option value="C√©sar">Esc. C√©sar da Costa</option><option value="Dago">Esc. Dagoberto O. das Virgens</option><option value="Melo">Insp. Edmilson Melo</option><option value="Edna">Insp. Edna Moraes</option><option value="Piazza">Esc. Fernanda Piazza</option><option value="Gui Mello">Insp. Guilherme Mello</option><option value="Jeff">Esc. Jefferson Antoniol</option><option value="Juliana">Insp. Juliana Tremper</option><option value="Bona">Insp. Juliano Bonacina</option><option value="Luciana">Esc. Luciana Bortoli</option><option value="Loss">Insp. Lucas Loss</option><option value="Tais">Insp. Tais Boesing</option><option value="Teresinha">Insp. Teresinha Carivali</option><option value="Thiago">Insp. Thiago Meireles</option><option value="Th√°ssia">Insp. Th√°ssia Guterres</option><option value="Vanessa">Insp. Vanessa Trindade</option>
            </select>
        </div>
        <!-- ABA 3: TROCAS -->
        <div class="tab-content">
            <label for="troca-date">Selecione a data da troca:</label>
            <select id="troca-date" onchange="trocaChangeOptions(true)">
                <option value="">-- Escolha uma data --</option>
                <option>01/11/2025</option><option>02/11/2025</option><option>03/11/2025</option><option>04/11/2025</option><option>05/11/2025</option><option>06/11/2025</option><option>07/11/2025</option><option>08/11/2025</option><option>09/11/2025</option><option>10/11/2025</option><option>11/11/2025</option><option>12/11/2025</option><option>13/11/2025</option><option>14/11/2025</option><option>15/11/2025</option><option>16/11/2025</option><option>17/11/2025</option><option>18/11/2025</option><option>19/11/2025</option><option>20/11/2025</option><option>21/11/2025</option><option>22/11/2025</option><option>23/11/2025</option><option>24/11/2025</option><option>25/11/2025</option><option>26/11/2025</option><option>27/11/2025</option><option>28/11/2025</option><option>29/11/2025</option><option>30/11/2025</option>
                <option>01/12/2025</option><option>02/12/2025</option><option>03/12/2025</option><option>04/12/2025</option><option>05/12/2025</option><option>06/12/2025</option><option>07/12/2025</option><option>08/12/2025</option><option>09/12/2025</option><option>10/12/2025</option><option>11/12/2025</option><option>12/12/2025</option><option>13/12/2025</option><option>14/12/2025</option><option>15/12/2025</option><option>16/12/2025</option><option>17/12/2025</option><option>18/12/2025</option><option>19/12/2025</option><option>20/12/2025</option><option>21/12/2025</option><option>22/12/2025</option><option>23/12/2025</option><option>24/12/2025</option><option>25/12/2025</option><option>26/12/2025</option><option>27/12/2025</option><option>28/12/2025</option><option>29/12/2025</option><option>30/12/2025</option><option>31/12/2025</option>
            </select>
            <div class="troca-bloco">
                <label for="pessoa-original1">Pessoa originalmente escalada (1):</label>
                <select id="pessoa-original1"></select>
                <label for="pessoa-troca1">Pessoa que far√° a troca (1):</label>
                <select id="pessoa-troca1"></select>
            </div>
            <div class="troca-bloco">
                <label for="pessoa-original2">Pessoa originalmente escalada (2):</label>
                <select id="pessoa-original2"></select>
                <label for="pessoa-troca2">Pessoa que far√° a troca (2):</label>
                <select id="pessoa-troca2"></select>
            </div>
            <div class="troca-bloco">
                <label for="pessoa-original3">Pessoa originalmente escalada (3):</label>
                <select id="pessoa-original3"></select>
                <label for="pessoa-troca3">Pessoa que far√° a troca (3):</label>
                <select id="pessoa-troca3"></select>
            </div>
            <button class="btn-troca" onclick="aplicarTrocasMultiplas()">Gerar texto com trocas</button>
        </div>
        <textarea id="output" placeholder="O texto do sobreaviso aparecer√° aqui..." readonly></textarea>
        <div class="buttons">
            <button class="btn-copy" onclick="copyText()">üìã Copiar Texto</button>
            <button class="btn-whatsapp" onclick="sendWhatsApp()">üíö Enviar no WhatsApp</button>
            <button class="btn-clear" onclick="clearAll()">üóëÔ∏è Limpar</button>
        </div>
    </div>
</div>
<script>
const pessoas = [
    { val:"Cau", label:"Insp. Acau√£" },{ val:"Saraiva", label:"Esc. Anderson Saraiva" },
    { val:"Brozoza", label:"Insp. Alexandre Brozoza" },{ val:"C√°tia", label:"Esc. C√°tia Fortunato" },
    { val:"Cristiano", label:"Insp. Cristiano Soletti" },{ val:"C√©sar", label:"Esc. C√©sar da Costa" },
    { val:"Dago", label:"Esc. Dagoberto O. das Virgens" },{ val:"Melo", label:"Insp. Edmilson Melo" },
    { val:"Edna", label:"Insp. Edna Moraes" },{ val:"Piazza", label:"Esc. Fernanda Piazza" },
    { val:"Gui Mello", label:"Insp. Guilherme Mello" },{ val:"Jeff", label:"Esc. Jefferson Antoniol" },
    { val:"Juliana", label:"Insp. Juliana Tremper" },{ val:"Bona", label:"Insp. Juliano Bonacina" },
    { val:"Luciana", label:"Esc. Luciana Bortoli" },{ val:"Loss", label:"Insp. Lucas Loss" },
    { val:"Tais", label:"Insp. Tais Boesing" },{ val:"Teresinha", label:"Insp. Teresinha Carivali" },
    { val:"Thiago", label:"Insp. Thiago Meireles" },{ val:"Th√°ssia", label:"Insp. Th√°ssia Guterres" },
    { val:"Vanessa", label:"Insp. Vanessa Trindade" }
];
const nameMap = Object.fromEntries(pessoas.map(p=>[p.val,p.label]));
const phoneMap = {
    "Cau": "(51) 986859065", "Piazza": "(51) 993605744", "Cristiano": "(51) 995659880", "Teresinha": "(51) 999829606",
    "Thiago": "(79) 988080613", "C√©sar": "(51) 998911160", "Vanessa": "(55) 984278960", "Bona": "(51) 989276060",
    "Gui Mello": "(51) 981354933", "Tais": "(51) 980549435", "Jeff": "(24) 981002933", "Luciana": "(51) 993935552",
    "Edna": "(53) 981339654", "Saraiva": "(51) 993879343", "Loss": "(51) 991055571", "Brozoza": "(51) 996500506",
    "Dago": "(51) 999920066", "Th√°ssia": "(51) 996499862", "Juliana": "(51) 993337587", "C√°tia": "(51) 985744501",
    "Melo": "(51) 983190815"
};
const schedule = {
    "01/11/2025": ["Cristiano", "Vanessa", "Thiago"], "02/11/2025": ["Cristiano", "Vanessa", "Thiago"],
    "03/11/2025": ["Piazza", "C√©sar", "Vanessa"], "04/11/2025": ["Bona", "Vanessa", "Saraiva"], "05/11/2025": ["Dago", "Th√°ssia", "Thiago"], "06/11/2025": ["Jeff", "Teresinha", "Saraiva"], "07/11/2025": ["Cristiano", "Teresinha", "Thiago"], "08/11/2025": ["Jeff", "Juliana", "Tais"], "09/11/2025": ["Jeff", "Luciana", "Edna"], "10/11/2025": ["Gui Mello", "Bona", "Tais"], "11/11/2025": ["Brozoza", "Loss", "Saraiva"], "12/11/2025": ["Cau", "Luciana", "Edna"], "13/11/2025": ["Melo", "C√°tia", "Jeff"], "14/11/2025": ["Piazza", "Bona", "Saraiva"], "15/11/2025": ["Gui Mello", "Th√°ssia", "Saraiva"], "16/11/2025": ["Gui Mello", "Loss", "Saraiva"], "17/11/2025": ["C√©sar", "Teresinha", "Jeff"], "18/11/2025": ["Dago", "C√°tia", "Edna"], "19/11/2025": ["Jeff", "Th√°ssia", "Saraiva"], "20/11/2025": ["Cristiano", "Juliana", "Thiago"], "21/11/2025": ["Gui Mello", "Melo", "Thiago"], "22/11/2025": ["Brozoza", "Loss", "Thiago"], "23/11/2025": ["Brozoza", "Loss", "Thiago"], "24/11/2025": ["Cau", "Luciana", "Saraiva"], "25/11/2025": ["Brozoza", "Loss", "Vanessa"], "26/11/2025": ["Melo", "Vanessa", "Jeff"], "27/11/2025": ["Piazza", "Gui Mello", "Tais"], "28/11/2025": ["C√©sar", "Juliana", "Vanessa"], "29/11/2025": ["Cau", "Luciana", "Edna"], "30/11/2025": ["Cau", "Juliana", "Edna"], "01/12/2025": ["Dago", "C√°tia", ""], "02/12/2025": ["Jeff", "Vanessa", ""], "03/12/2025": ["Cristiano", "Juliana", ""], "04/12/2025": ["Gui Mello", "Jeff", ""], "05/12/2025": ["Brozoza", "Loss", ""], "06/12/2025": ["Melo", "Th√°ssia", ""], "07/12/2025": ["Melo", "Th√°ssia", ""], "08/12/2025": ["Cau", "Luciana", ""], "09/12/2025": ["Melo", "Th√°ssia", ""], "10/12/2025": ["Piazza", "Bona", ""], "11/12/2025": ["C√©sar", "Teresinha", ""], "12/12/2025": ["Dago", "C√°tia", ""], "13/12/2025": ["Piazza", "Bona", ""], "14/12/2025": ["Piazza", "Bona", ""], "15/12/2025": ["Jeff", "Vanessa", ""], "16/12/2025": ["Cristiano", "Juliana", ""], "17/12/2025": ["Gui Mello", "Teresinha", ""], "18/12/2025": ["Brozoza", "Loss", ""], "19/12/2025": ["Cau", "Luciana", ""], "20/12/2025": ["C√©sar", "Teresinha", ""], "21/12/2025": ["C√©sar", "Teresinha", ""], "22/12/2025": ["Melo", "Th√°ssia", ""], "23/12/2025": ["Piazza", "Bona", ""], "24/12/2025": ["C√©sar", "Teresinha", ""], "25/12/2025": ["Dago", "C√°tia", ""], "26/12/2025": ["Jeff", "Vanessa", ""], "27/12/2025": ["Dago", "C√°tia", ""], "28/12/2025": ["Dago", "C√°tia", ""], "29/12/2025": ["Cristiano", "Juliana", ""], "30/12/2025": ["Gui Mello", "Brozoza", ""], "31/12/2025": ["Brozoza", "Loss", ""]
};
function trocaChangeOptions(atualizaTexto) {
    const date = document.getElementById('troca-date').value;
    let esc = schedule[date] || ["", "", ""];
    for (let i=1; i<=3; i++) {
        let orig = document.getElementById('pessoa-original'+i);
        orig.innerHTML = '<option value="">-- Escolha a pessoa original --</option>';
        esc.forEach(e => { if (e && nameMap[e]) orig.innerHTML += `<option value="${e}">${nameMap[e]}</option>`; });
        let troca = document.getElementById('pessoa-troca'+i);
        troca.innerHTML = '<option value="">-- Escolha a pessoa substituta --</option>';
        pessoas.forEach(p => troca.innerHTML += `<option value="${p.val}">${p.label}</option>`);
    }
    if (atualizaTexto) document.getElementById('output').value = buildMessage(date);
}
window.onload = function() { trocaChangeOptions(); };
function showTab(index) {
    const contents = document.querySelectorAll('.tab-content');
    const buttons = document.querySelectorAll('.tab-btn');
    contents.forEach(c => c.classList.remove('active'));
    buttons.forEach(b => b.classList.remove('active'));
    contents[index].classList.add('active');
    buttons[index].classList.add('active');
    // N√ÉO apaga o output, s√≥ troca ao selecionar outra data/pessoa ou gerar troca!
}
function getDayOfWeek(dateStr) {
    const [dia, mes, ano] = dateStr.split('/');
    const date = new Date(ano, mes - 1, dia);
    const days = ['domingo', 'segunda-feira', 'ter√ßa-feira', 'quarta-feira', 'quinta-feira', 'sexta-feira', 's√°bado'];
    return days[date.getDay()];
}
function buildMessage(date, escalaManual) {
    let escala = escalaManual || schedule[date];
    if (!escala) return "Nenhum sobreaviso encontrado para essa data ou sele√ß√£o.";
    const [sa01, sa02, saNac] = escala;
    let text = "*Sobreaviso DRV/DEIC*\nData: " + date + "\n\n";
    if (nameMap[sa01]) text += nameMap[sa01] + "\n" + (phoneMap[sa01]||"-") + "\n\n";
    if (nameMap[sa02]) text += nameMap[sa02] + "\n" + (phoneMap[sa02]||"-") + "\n\n";
    if (saNac && saNac !== "" && nameMap[saNac]) {
        text += "NAC: " + nameMap[saNac] + "\n" + (phoneMap[saNac]||"-") + "\n\n";
    }
    text += "Chefe de SI: Com. Bruna Caldeira\n(51) 99139-9403\n\nAutoridade Policial:\nDel. Jeiselaure de Souza\n(51) 99145-8919";
    return text;
}
function buildMessageWithWeekday(date, escalaManual) {
    let escala = escalaManual || schedule[date];
    if (!escala) return "Nenhum sobreaviso encontrado para essa data ou sele√ß√£o.";
    const dayOfWeek = getDayOfWeek(date);
    const [sa01, sa02, saNac] = escala;
    let text = "*Sobreaviso DRV/DEIC*\nData: " + date + " (" + dayOfWeek + ")\n\n";
    if (nameMap[sa01]) text += nameMap[sa01] + "\n" + (phoneMap[sa01]||"-") + "\n\n";
    if (nameMap[sa02]) text += nameMap[sa02] + "\n" + (phoneMap[sa02]||"-") + "\n\n";
    if (saNac && saNac !== "" && nameMap[saNac]) {
        text += "NAC: " + nameMap[saNac] + "\n" + (phoneMap[saNac]||"-") + "\n\n";
    }
    text += "Chefe de SI: Com. Bruna Caldeira\n(51) 99139-9403\n\nAutoridade Policial:\nDel. Jeiselaure de Souza\n(51) 99145-8919";
    return text;
}
function searchByDate() {
    const date = document.getElementById('date-select').value;
    if (!date) return;
    document.getElementById('output').value = buildMessage(date);
}
function handlePersonSearch() {
    const personShort = document.getElementById('person-select').value;
    const outputElement = document.getElementById('output');
    if (!personShort) {
        // N√ÉO apaga o output
        return;
    }
    let result = '', novCount = 0, decCount = 0, datesFound = [];
    for (let date in schedule) {
        if (schedule.hasOwnProperty(date)) {
            const escala = schedule[date];
            if (escala.includes(personShort)) {
                datesFound.push(date);
                if (date.includes("/11/")) novCount++;
                else if (date.includes("/12/")) decCount++;
            }
        }
    }
    datesFound = datesFound.sort((a, b) => {
        const [diaA, mesA, anoA] = a.split('/');
        const [diaB, mesB, anoB] = b.split('/');
        return new Date(anoA, mesA - 1, diaA) - new Date(anoB, mesB - 1, diaB);
    });
    if (!datesFound.length) {
        outputElement.value = "Nenhum sobreaviso encontrado para essa pessoa.";
        return;
    }
    result += "Novembro: " + novCount + " sobreavisos\n";
    result += "Dezembro: " + decCount + " sobreavisos\n\n";
    result += "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";
    for (let i = 0; i < datesFound.length; i++) {
        if (i > 0) result += "\n\n‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n\n";
        result += buildMessageWithWeekday(datesFound[i]);
    }
    outputElement.value = result;
}
function aplicarTrocasMultiplas() {
    const date = document.getElementById('troca-date').value;
    const original1 = document.getElementById('pessoa-original1').value;
    const substituta1 = document.getElementById('pessoa-troca1').value;
    const original2 = document.getElementById('pessoa-original2').value;
    const substituta2 = document.getElementById('pessoa-troca2').value;
    const original3 = document.getElementById('pessoa-original3').value;
    const substituta3 = document.getElementById('pessoa-troca3').value;
    const outputElement = document.getElementById('output');
    if (!date) {
        outputElement.value = "Selecione a data.";
        return;
    }
    let escalaAtual = schedule[date] ? [...schedule[date]] : null;
    if (!escalaAtual) {
        outputElement.value = "Nenhum sobreaviso encontrado para essa data ou sele√ß√£o.";
        return;
    }
    function applyExchange(orig, sub) {
        if (orig && sub) {
            for (let i = 0; i < escalaAtual.length; i++) {
                if (escalaAtual[i] === orig) {
                    escalaAtual[i] = sub;
                }
            }
        }
    }
    applyExchange(original1, substituta1);
    applyExchange(original2, substituta2);
    applyExchange(original3, substituta3);
    outputElement.value = buildMessage(date, escalaAtual);
}
function copyText() {
    const text = document.getElementById('output').value;
    if (!text) { alert('Nenhum texto para copiar!'); return; }
    navigator.clipboard.writeText(text).then(() => { alert('‚úÖ Texto copiado!'); });
}
function sendWhatsApp() {
    const text = document.getElementById('output').value;
    if (!text) { alert('Nenhum texto para enviar!'); return; }
    const encoded = encodeURIComponent(text);
    window.open(`https://wa.me/?text=${encoded}`, '_blank');
}
function clearAll() {
    document.getElementById('output').value = '';
    document.getElementById('date-select').value = '';
    document.getElementById('person-select').value = '';
    if (document.getElementById('troca-date')) document.getElementById('troca-date').value = '';
    for (let i=1;i<=3;i++) {
        document.getElementById('pessoa-original'+i).value = '';
        document.getElementById('pessoa-troca'+i).value = '';
    }
}
</script>
</body>
</html>
